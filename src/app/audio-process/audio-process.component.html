<div>
    <h2>Process Audio</h2>
    <input type="file" (change)="onFileSelected($event)" />
    <button (click)="processAudio()" [disabled]="!selectedFile || isProcessing">
      {{ isProcessing ? 'Processing...' : 'Process Audio' }}
    </button>
  
    <!-- Display audio_file data -->
    <div *ngIf="audioFileData">
      <h3>Audio File Details</h3>
      <p><strong>File Path:</strong> {{ audioFileData.file_path }}</p>
      <p><strong>Transcription:</strong> {{ audioFileData.transcription }}</p>
      <p><strong>Keywords Detected:</strong> {{ audioFileData.keywords_detected }}</p>
      <p><strong>Status:</strong> {{ audioFileData.status }}</p>
      <p><strong>Duration:</strong> {{ audioFileData.duration }}</p>
    </div>
  
    <!-- Display segments -->
    <div *ngIf="segments.length > 0">
      <h3>Segments</h3>
      <ul>
        <li *ngFor="let segment of segments">{{ segment }}</li>
      </ul>
    </div>
  
    <!-- Display error message -->
    <div *ngIf="errorMessage" class="error">
      <p>{{ errorMessage }}</p>
    </div>
  
    <!-- Display fetched audio records -->
    <div>
      <h2>Existing Audio Records</h2>
  
      <!-- Show error if exists -->
      <div *ngIf="fetchErrorMessage" class="error">
        <p>{{ fetchErrorMessage }}</p>
      </div>
  
      <!-- Display records -->
      <div *ngIf="audioRecords.length > 0">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>File Path</th>
              <th>Transcription</th>
              <th>Keywords Detected</th>
              <th>Status</th>
              <th>Duration</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let record of audioRecords; let i = index">
              <td>{{ record.id }}</td>
              <td>{{ record.file_path }}</td>
  
              <!-- Transcription with View More -->
              <td>
                <span *ngIf="!record.showFull">
                  {{ record.transcription | slice: 0:500 }}...
                  <a href="javascript:void(0)" (click)="toggleViewMore(i, true)">View More</a>
                </span>
                <span *ngIf="record.showFull">
                  {{ record.transcription }}
                  <a href="javascript:void(0)" (click)="toggleViewMore(i, false)">View Less</a>
                </span>
              </td>
  
              <td>{{ record.keywords_detected }}</td>
              <td>{{ record.status }}</td>
              <td>{{ record.duration }}</td>
            </tr>
          </tbody>
        </table>
      </div>
  
      <!-- No records message -->
      <div *ngIf="audioRecords.length === 0 && !fetchErrorMessage">
        <p>No audio records found.</p>
      </div>
    </div>
  </div>
  